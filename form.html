<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Regist(?)</title>

    <meta name="description" content="Source code generated using layoutit.com">
    <meta name="author" content="LayoutIt!">

    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/css/style.css" rel="stylesheet">

    <script src="/socket.io/socket.io.js"></script>
    <script src="/static/jQuery/jquery-2.1.4.min.js"></script>
  </head>
  <body>

    <div class="container-fluid">
	<div class="row">
		<div class="col-md-12">
			<nav class="navbar navbar-default" role="navigation">
				<div class="navbar-header">
					 
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						 <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
					</button> <a class="navbar-brand" href="http://localhost:3000/chat.html">Chatroom</a>
				</div>
				
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li>
							<a href="http://localhost:3000">Home</a>
						</li>
						<li>
							<a href="http://localhost:3000/chat.html">Start Chatting!</a>
						</li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li class="active">
							<a href="http://localhost:3000/login.html">Register</a>
						</li>
					</ul>
				</div>
				
			</nav>
			<div class="row">
				<div class="col-md-3"></div>
				<div class="col-md-6">
					<div class="col-md-1">
						<div class="col-md-2"></div>
						<div class="col-md-7">
							<div class="col-md-2"></div>
							<div class="col-md-7">
								<h3>Register</h3>
							</div>
							<div class="col-md-3"></div>
						</div>
						<div class="col-md-3"></div>
					</div>
					<div class="col-md-8"></div>
					<div class="col-md-3"></div>
				</div>
				<div class="col-md-3"></div>
			</div>
			<div class="row">
				<div class="col-md-3">	</div>
				<div class="col-md-9">
					<div class="col-md-12" id="ques"></div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-2">
				</div>
				<div class="col-md-7">
					<form class="form-horizontal" role="form">
						<div class="form-group">
							 
							<label for="inputUsername3" class="col-sm-2 control-label">
								Username
							</label>
							<div class="col-sm-10">
								<input type="Username" class="form-control" id="username" />
							</div>
						</div>
						<div class="form-group">
							 
							<label for="inputPassword3" class="col-sm-2 control-label">
								Nickname
							</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="nickname" />
							</div>
						</div>
						<div class="form-group">
							 
							<label for="inputPassword3" class="col-sm-2 control-label">
								Password
							</label>
							<div class="col-sm-10">
								<input type="password" class="form-control" id="pass" />
							</div>
						</div>
						<div class="form-group">
							 
							<label for="inputPassword3" class="col-sm-2 control-label">
								Password Confirm
							</label>
							<div class="col-sm-10">
								<input type="password" class="form-control" id="pass2" />
							</div>
						</div>
						<div class="form-group">
							 
							<label for="inputPassword3" class="col-sm-2 control-label">
								Email
							</label>
							<div class="col-sm-10">
								<input type="email" class="form-control" id="email" />
							</div>
						</div>
						<div class="form-group">
							 
							<label for="inputPassword3" class="col-sm-2 control-label">
								birthday
							</label>
							<div class="col-sm-10">
								<input type="date" class="form-control" id="birth" />
							</div>
						</div>
						<div class="form-group">
							<div class="col-sm-offset-2 col-sm-10">
								 
								<button type="submit" class="btn btn-default submit" id="submit" >
									Submit<!--auto refresh when press-->
								</button>
								<button type="reset" class="btn btn-default reset" id="reset">
									Reset
								</button>
							</div>
						</div>
					</form>
				</div>
				<div class="col-md-2">
				</div>
			</div>
		</div>
	</div>
</div>

    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/scripts.js"></script>
  </body>
</html>
<script>
	//reset onclick
  var socket = io('http://localhost:3000');

  var cnta=0;

  window.addEventListener('load',function() { 
    document.getElementById('submit').addEventListener('click',function() {
      var username = document.getElementById('username').value; 
      var nickname = document.getElementById('nickname').value; 
      var pass = document.getElementById('pass').value; 
      var pass2 = document.getElementById('pass2').value; 
      var email = document.getElementById('email').value; 
      var birth = document.getElementById('birth').value; 

      if(username==""){
        $('#ques').text("username is empty");
        document.getElementById('pass2').value="";
      }
      else if(nickname==""){
        $('#ques').text("nickname is empty");
        document.getElementById('pass2').value="";
      }
      else if(pass==""){
         $('#ques').text("password is empty");
        document.getElementById('pass2').value="";
       }
      else if(pass2==""){
         $('#ques').text("password confirm is empty");
       }
      else if(email==""){
        $('#ques').text("email is empty");
        document.getElementById('pass2').value="";
      }
       else if(birth==""){
        $('#ques').text("birthday is empty");
         document.getElementById('pass2').value="";
       }
      else if(pass!=pass2){
         $('#ques').text("passwords are not alike");
         document.getElementById('pass').value="";
         document.getElementById('pass2').value="";
      }else if(pass.length<8){
        $('#ques').text("password is too short! (at least 8)");
        document.getElementById('pass').value="";
        document.getElementById('pass2').value="";
       }else{
        console.log("come to here");
        $('#ques').text("");
         socket.emit('regq',username,nickname,pass,pass2,email,birth);
       }
    }, false); 
	document.getElementById('reset').addEventListener('click',function() {
      document.getElementById('username').value=""; 
      document.getElementById('nickname').value=""; 
      document.getElementById('pass').value=""; 
      document.getElementById('pass2').value=""; 
      document.getElementById('email').value=""; 
      document.getElementById('birth').value=""; 
     }, false); 
  }, false);

  socket.on('usernameq',function(){
    document.getElementById('username').value="";
    document.getElementById('pass').value="";
    document.getElementById('pass2').value="";
    $('#ques').text("username has been taken");
  });

  socket.on('nickq',function(){
    document.getElementById('nickname').value=""
    $('#ques').text("nickname has been taken");
  });

  socket.on('jumpmain',function(){
    if(cnta==0){
      $('#done').append('<a href="http://localhost:3000/chat.html">go to chatroom!</a>');
      cnta=cnta+1;
    }
  })	
</script>